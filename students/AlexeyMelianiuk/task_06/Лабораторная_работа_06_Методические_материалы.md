# Лабораторная работа 06 — Методические материалы

Темы: REST API версии, Swagger, валидация.

1. Версии API
- Подключите пакет: Microsoft.AspNetCore.Mvc.Versioning (и .Versioning.ApiExplorer для Swagger групп).
- В Program.cs добавьте версионирование:
	- builder.Services.AddApiVersioning(o => { o.DefaultApiVersion = new ApiVersion(1,0); o.AssumeDefaultVersionWhenUnspecified = true; o.ReportApiVersions = true; });
	- builder.Services.AddVersionedApiExplorer(opt => { opt.GroupNameFormat = 'VVV'; opt.SubstituteApiVersionInUrl = true; });
- Маршруты контроллеров: `[Route("api/v{version:apiVersion}/items")]` и атрибуты `[ApiVersion("1.0")]`, `[ApiVersion("2.0")]`.
- DTO v1/v2: создайте отдельные модели или расширьте v2 дополнительными полями.

2. Swagger/Swashbuckle
- Подключите Swashbuckle.AspNetCore и настройте генерацию по версиям ApiExplorer (перебор описаний версий, создание документа на версию).
- Опишите схемы DTO, добавьте примеры через Schema/ExampleProviders.
- Для ошибок используйте ProblemDetails (RFC 7807) и опишите стандартные коды 400/404/500.

3. Валидация
- Включите DataAnnotations на моделях; для сложной логики подключите FluentValidation (FluentValidation.AspNetCore) и регистрируйте валидаторы.
- Возвращайте ValidationProblem / ProblemDetails с понятными detail/instance.

4. Отчёт
- В `students/<id>/task_06/doc/readme.md`: скриншоты Swagger, примеры запросов/ошибок.

5. Запуск
- `dotnet run --project <ваш API проект>` и проверьте Swagger UI для групп v1/v2.
