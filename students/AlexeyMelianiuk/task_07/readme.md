# Лабораторная работа 07. Тесты, кэш/ETag, ошибки/устойчивость, оптимизация, мини‑итог (новичок)



Цель: научиться базовым тестам API, кэшированию на сервере, стандартной обработке ошибок и первичной оптимизации; собрать небольшой end‑to‑end сценарий.

Задания (минимум):
1) Тесты: напишите 3–5 юнит‑тестов контроллера (xUnit/NUnit) с Moq/NSubstitute. Проверьте коды ответов и сериализацию.
2) Кэш/ETag: включите ResponseCaching и `ETag/If-None-Match` для GET, покажите 304.
3) Ошибки/устойчивость: добавьте глобальный обработчик исключений с ProblemDetails и correlation id; для вызова внешнего сервиса примените Polly (retry или timeout).
4) Оптимизация: включите сжатие ответов и настройте `System.Text.Json` (IgnoreNullValues, CamelCase). Покажите p95 до/после по одному эндпоинту.
5) Мини‑итог: один пользовательский сценарий end‑to‑end (например, логин → загрузка файла → запрос списка через API → кешированный GET), плюс 1–2 теста.

Сдача:
- Папка src — код и тесты.
- В readme: скриншоты/метрики, как проверить 304, примеры ProblemDetails.

---

Методические материалы:
- [Лабораторная работа 07 — Методические материалы](./Лабораторная_работа_07_Методические_материалы.md)

---

## Перед Pull Request: синхронизация с основным репозиторием

Перед созданием PR обновите свою ветку из оригинального репозитория:

1) Добавьте upstream (однажды):
	- `git remote add upstream https://github.com/brstu/IPK-WT-P30.git`
2) Синхронизация:
	- `git fetch upstream`
	- `git checkout main` (или рабочая ветка)
	- `git rebase upstream/main`  (или `git merge upstream/main`)
3) Разрешите конфликты и отправьте обновления:
	- `git push --force-with-lease` (после rebase) или `git push`

4) Обновите таблицу «Успеваемость» в корневом `README.md`:
	- Добавьте себя (ФИО, ссылку на `students/<ваш_идентификатор>`),
	- Отметьте выполнение этой ЛР символом ✓ в колонке “#7”.
	- Пример оформления — строка тестового студента №99.

Так ваш PR будет без лишних конфликтов.
