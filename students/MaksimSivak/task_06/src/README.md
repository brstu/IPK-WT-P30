–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 06. REST API —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
 –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
REST API –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —É—á–µ—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (v1 –∏ v2), –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Swagger.

 –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
.NET 8.0 SDK –∏–ª–∏ –≤—ã—à–µ

PowerShell –∏–ª–∏ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

–®–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞:
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
dotnet restore
–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:

bash
dotnet build
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

bash
dotnet run
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

text
http://localhost:5150/swagger
üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API
–í–µ—Ä—Å–∏—è 1.0
GET /api/v1/expensecategories - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤

GET /api/v1/expensecategories/{id} - –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ ID

–í–µ—Ä—Å–∏—è 2.0
GET /api/v2/expensecategories - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)

POST /api/v2/expensecategories - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é

GET /api/v2/expensecategories/{id} - –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ ID

DELETE /api/v2/expensecategories/{id} - –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

üéØ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (POST)
http
POST /api/v2/expensecategories
Content-Type: application/json

{
  "name": "–ü—Ä–æ–¥—É–∫—Ç—ã",
  "description": "–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–∏—Ç–∞–Ω–∏—è",
  "monthlyBudget": 15000,
  "colorCode": "#ff5733"
}
–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:
json
{
  "id": 1,
  "name": "–ü—Ä–æ–¥—É–∫—Ç—ã",
  "description": "–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–∏—Ç–∞–Ω–∏—è",
  "monthlyBudget": 15000,
  "colorCode": "#ff5733",
  "createdAt": "2024-01-15T10:30:00Z"
}
–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (GET)
http
GET /api/v1/expensecategories?page=1&pageSize=10&sort=name&filter=–µ–¥–∞
–ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞:
text
X-Total-Count: 25
X-Page: 1
X-Page-Size: 10
‚ö†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫
–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (400 Bad Request)
http
POST /api/v2/expensecategories
Content-Type: application/json

{
  "name": "",
  "monthlyBudget": -100,
  "colorCode": "invalid"
}
–û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏:
json
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",
  "title": "Bad Request",
  "status": 400,
  "errors": {
    "Name": ["–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],
    "MonthlyBudget": ["–ë—é–¥–∂–µ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º"],
    "ColorCode": ["–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ü–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å #RRGGBB)"]
  }
}
–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (404 Not Found)
http
GET /api/v1/expensecategories/999
–û—Ç–≤–µ—Ç:
json
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.4",
  "title": "Not Found",
  "status": 404,
  "detail": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å ID 999 –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
ASP.NET Core 8.0 - –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫

Swagger/OpenAPI - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

FluentValidation - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

API Versioning - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π

DataAnnotations - –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
FinancialAccounting.API/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îî‚îÄ‚îÄ ExpenseCategoriesController.cs
‚îú‚îÄ‚îÄ DTOs/
‚îÇ   ‚îú‚îÄ‚îÄ v1/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ExpenseCategoryDtoV1.cs
‚îÇ   ‚îî‚îÄ‚îÄ v2/
‚îÇ       ‚îî‚îÄ‚îÄ ExpenseCategoryDtoV2.cs
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îî‚îÄ‚îÄ ExpenseCategory.cs
‚îú‚îÄ‚îÄ Validators/
‚îÇ   ‚îî‚îÄ‚îÄ ExpenseCategoryValidator.cs
‚îú‚îÄ‚îÄ Program.cs
‚îî‚îÄ‚îÄ FinancialAccounting.API.csproj
üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ URL: api/v{version}/[controller]

–ü–∞–≥–∏–Ω–∞—Ü–∏—è: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã page, pageSize, sort, filter

–í–∞–ª–∏–¥–∞—Ü–∏—è: DataAnnotations + FluentValidation

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: ProblemDetails –¥–ª—è 400/404/500

Swagger: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π

üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 5150

–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è)

Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É /swagger

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Content Negotiation

üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º [ApiController]

‚úÖ –í–µ—Ä—Å–∏–∏ v1 –∏ v2 –≤ –º–∞—Ä—à—Ä—É—Ç–∞—Ö

‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è/—Ñ–∏–ª—å—Ç—Ä/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è DataAnnotations/FluentValidation

‚úÖ –í–æ–∑–≤—Ä–∞—Ç ProblemDetails –¥–ª—è –æ—à–∏–±–æ–∫

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ "–í–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"