–û—Ç—á–µ—Ç –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ ‚Ññ5
"ASPNET Core Identity + –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞. –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–∏ (DI)"
–û–≤–µ—á–∫–∏–Ω–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –í–∞—Å–∏–ª—å–µ–≤–Ω–∞
–ì—Ä—É–ø–ø–∞: P30
–î–∞—Ç–∞: 29.09.2025

üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è:
text

Task05/
‚îú‚îÄ‚îÄ Task05.Domain/           # Domain layer
‚îÇ   ‚îú‚îÄ‚îÄ Entities/
‚îÇ   ‚îî‚îÄ‚îÄ Interfaces/
‚îú‚îÄ‚îÄ Task05.Infrastructure/   # Data layer  
‚îÇ   ‚îú‚îÄ‚îÄ Data/
‚îÇ   ‚îú‚îÄ‚îÄ Migrations/
‚îÇ   ‚îî‚îÄ‚îÄ Services/
‚îú‚îÄ‚îÄ Task05.Application/      # Business logic layer
‚îî‚îÄ‚îÄ Task05.Web/             # Presentation layer
    ‚îú‚îÄ‚îÄ Controllers/
    ‚îú‚îÄ‚îÄ Views/
    ‚îî‚îÄ‚îÄ Program.cs

üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
1. –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚úÖ

    Domain layer: –°–æ–¥–µ—Ä–∂–∏—Ç entities –∏ interfaces

    Infrastructure layer: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º, –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

    Web layer: –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

2. –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–∏ (Dependency Injection) ‚úÖ

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
csharp

public interface IDateTimeService
{
    DateTime Now { get; }
    DateTime UtcNow { get; }
}

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
csharp

public class DateTimeService : IDateTimeService
{
    public DateTime Now => DateTime.Now;
    public DateTime UtcNow => DateTime.UtcNow;
}

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
csharp

builder.Services.AddScoped<IDateTimeService, DateTimeService>();

3. ASP.NET Core Identity ‚úÖ

–ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
csharp

public class ApplicationUser : IdentityUser
{
    public string? FirstName { get; set; }
    public string? LastName { get; set; }
}

–ö–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
csharp

public class ApplicationDbContext : IdentityDbContext<ApplicationUser>

4. –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚úÖ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

    –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

    –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å (—Ä–æ–ª—å Admin)

    –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ [Authorize]

5. –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã ‚úÖ

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:
csharp

[Authorize(Roles = "Admin")]
public class FilesController : Controller

[Authorize(Roles = "Admin")]
public class HealthController : Controller

üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ú–∏–≥—Ä–∞—Ü–∏–∏:

    –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Task05

    –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü Identity

    –°–æ–∑–¥–∞–Ω–∞ —Ä–æ–ª—å "Admin"

    –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

–¢–µ—Å—Ç–æ–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:

    Email: admin@test.com

    Password: Admin123!

    –†–æ–ª—å: Admin

üåê –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:

    –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏ UTC –≤—Ä–µ–º–µ–Ω–∏

    –°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    –ù–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º

    –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—ã—Ö–æ–¥–∞

–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:

    –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ - —Ç–æ–ª—å–∫–æ –¥–ª—è Admin

    Health Check - —Ç–æ–ª—å–∫–æ –¥–ª—è Admin

üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã:

    –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

    –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫

    –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

    –†–æ–ª–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

    –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
bash

dotnet ef database update
dotnet run

–î–æ—Å—Ç—É–ø–Ω—ã–µ URL:

    http://localhost:5159 - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

    /Account/Login - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞

    /Account/Register - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

    /Files/Index - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (—Ç–æ–ª—å–∫–æ Admin)

    /Health/Check - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã (—Ç–æ–ª—å–∫–æ Admin)

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–¢–µ—Å—Ç-–∫–µ–π—Å—ã:
–¢–µ—Å—Ç	–†–µ–∑—É–ª—å—Ç–∞—Ç
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è	‚úÖ –£—Å–ø–µ—à–Ω–æ
–í—Ö–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏	‚úÖ –£—Å–ø–µ—à–Ω–æ
–í—Ö–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏	‚úÖ –û—à–∏–±–∫–∞
–î–æ—Å—Ç—É–ø –∫ /Files –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏	‚úÖ –ó–∞–ø—Ä–µ—â–µ–Ω
–î–æ—Å—Ç—É–ø –∫ /Files —Å —Ä–æ–ª—å—é User	‚úÖ –ó–∞–ø—Ä–µ—â–µ–Ω
–î–æ—Å—Ç—É–ø –∫ /Files —Å —Ä–æ–ª—å—é Admin	‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏	‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ
üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

    ASP.NET Core 6.0

    Entity Framework Core

    ASP.NET Core Identity

    SQL Server LocalDB

    Bootstrap 5

NuGet –ø–∞–∫–µ—Ç—ã:

    Microsoft.AspNetCore.Identity.EntityFrameworkCore

    Microsoft.EntityFrameworkCore.SqlServer

    Microsoft.EntityFrameworkCore.Tools

    Microsoft.AspNetCore.Identity.UI

‚úÖ –í—ã–≤–æ–¥

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –í—Å–µ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

    ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

    ‚úÖ –°–æ–∑–¥–∞–Ω –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ DI

    ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ ASP.NET Core Identity

    ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

    ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å —Å –∑–∞—â–∏—Ç–æ–π —Ä–∞–∑–¥–µ–ª–æ–≤

    ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

    ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å